function applyPointShape(a,b){if("bar"!==type&&"bubble"!==type){var c=d3.selectAll(".c3-circles-"+a),d=c.selectAll("circle")[0];if(d)for(var e=0;e<d.length;e++)d[e].style.opacity=0,appendSymbol(c,d[e].cx.baseVal.value,d[e].cy.baseVal.value,b,d[e].style.fill)}}function applyLegendShape(a,b){if("none"!==b){var c=d3.selectAll(".c3-legend-item-"+a),d=c.selectAll("line");if(!d||!d.length)return;d=d[0][0],d.style.opacity=0,appendSymbol(c,d.x1.baseVal.value+5,d.y1.baseVal.value,b,d.style.stroke)}}function appendSymbol(a,b,c,d,e){"none"!==d&&a.append("path").attr("transform",function(a){return"translate("+b+", "+c+")"}).attr("class","symbol").attr("d",d3.svg.symbol().type(d).size(50)).style("fill",e).style("stroke",e)}function displayError(a){console.log(a);var b=document.getElementById("error");b.innerHTML=a,b.style.display="block"}var retryFrequency=10,delay=0,maxDelay=1e4,intervalID=setInterval(function(){if(delay+=retryFrequency,!document.getElementById("chart")||!document.body.offsetWidth||!document.body.offsetHeight)return void(delay>maxDelay&&clearInterval(intervalID));clearInterval(intervalID);try{var a=(document.getElementById("chart-title")||{offsetHeight:0}).offsetHeight;config.size={height:document.body.offsetHeight-a,width:document.body.offsetWidth},config.interaction={enabled:!0};var b=function(a){return a};"time"===type&&(b=d3.time.format(config.axis.x.tick.format)),config.tooltip={show:!0,grouped:"bar"===type,contents:function(a,c,d,e){for(var f="",g=0;g<a.length;g++)if(data.isData[a[g].id]){var h=config.data.names[a[g].id];f+="<tr><td>"+h+"</td><td>"+a[g].value+"</td></tr>"}return f?(f="bar"===type?"<tr><td colspan='2'>"+data.barLabels[a[0].x]+"</td></tr>"+f:"<tr><td>"+data.xNames[a[0].id]+"</td><td>"+b(a[0].x)+"</td></tr>"+f,f="<table>"+f+"</table>",f="<div id='tooltip'>"+f+"</div>"):""}},config.point={r:function(a){return data.radii[a.id]?30*data.radii[a.id][a.index]/data.maxRadii[a.id]:0}},config.axis.x.tick&&!config.axis.x.tick.format&&(config.axis.x.tick.format=function(a){var b=String(a);if("time"===type){var c=b.match(/\d+:\d+:\d+/)[0];b=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate()+" "+c}var d=void 0===axis.xLabels[b]?a:axis.xLabels[b];return Math.round(d)||d}),config.axis.y.tick&&(config.axis.y.tick.format=function(a){return axis.yLabels[String(a)]||Math.round(a)}),config.axis.y2.tick&&(config.axis.y2.tick.format=function(a){return axis.y2Labels[String(a)]||Math.round(a)});var c=[];for(var d in config.data.xs)data.isData[d]||c.push(d);config.legend.hide=c,config.data.labels={format:function(a,b,c){return data.annotations[b]||""}},config.data.order=!1,config.onrendered=function(){d3.selectAll("g.c3-texts text").attr("dy",10);for(var a in data.pointStyles){var b=data.pointStyles[a];applyPointShape(a,b),applyLegendShape(a,b)}for(var a in config.data.colors){if("bar"===type)for(var c=d3.selectAll(".c3-bars-"+a+" path")[0],d=0;d<c.length;d++){data.barColors[a]&&data.barColors[a][d]&&(c[d].style.fill=data.barColors[a][d]);var e;data.barOpacities[a]&&(e=data.barOpacities[a][d]),e=e||data.lineOpacities[a],c[d].style.opacity=e}else{var f=d3.selectAll(".c3-lines-"+a+" path")[0][0];f&&(f.style.opacity=data.lineOpacities[a])}var g=d3.selectAll(".c3-legend-item-"+a+" path")[0];g.length||(g=d3.selectAll(".c3-legend-item-"+a+" line")[0]),g.length&&(g=g[0],g.style.opacity=data.lineOpacities[a]);var h=d3.selectAll(".c3-circles-"+a+" path")[0];h.length||(h=d3.selectAll(".c3-circles-"+a+" circle")[0]);for(var d=0;d<h.length;d++)h[d].style.opacity=data.lineOpacities[a]}for(var a in data.areaColors){var i=d3.selectAll(".c3-areas-"+a+" path")[0][0];i&&(i.style.fill=data.areaColors[a],i.style.opacity=data.areaOpacities[a])}var j=0,k=setInterval(function(){return j+=retryFrequency,window.Android?(clearInterval(k),void Android.run()):void(j>maxDelay&&clearInterval(k))})},c3.generate(config)}catch(a){displayError(a)}},retryFrequency);
