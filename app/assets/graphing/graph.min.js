function applyPointShape(t,a){if("bar"!==type&&"bubble"!==type){var e=d3.selectAll(".c3-circles-"+t),i=e.selectAll("circle")[0];if(i)for(var r=0;r<i.length;r++)i[r].style.opacity=0,appendSymbol(e,i[r].cx.baseVal.value,i[r].cy.baseVal.value,a,i[r].style.fill)}}function applyLegendShape(t,a){if("none"!==a){var e=d3.selectAll(".c3-legend-item-"+t),i=e.selectAll("line");if(!i||!i.length)return;i=i[0][0],i.style.opacity=0,appendSymbol(e,i.x1.baseVal.value+5,i.y1.baseVal.value,a,i.style.stroke)}}function appendSymbol(t,a,e,i,r){"none"!==i&&t.append("path").attr("transform",function(){return"translate("+a+", "+e+")"}).attr("class","symbol").attr("d",d3.svg.symbol().type(i).size(50)).style("fill",r).style("stroke",r)}function displayError(t){console.log(t);var a=document.getElementById("error");a.innerHTML=t,a.style.display="block"}var retryFrequency=10,delay=0,maxDelay=1e4,intervalID=setInterval(function(){if(delay+=retryFrequency,!document.getElementById("chart")||!document.body.offsetWidth||!document.body.offsetHeight)return void(delay>maxDelay&&clearInterval(intervalID));clearInterval(intervalID);try{var t=(document.getElementById("chart-title")||{offsetHeight:0}).offsetHeight;config.size={height:document.body.offsetHeight-t,width:document.body.offsetWidth},config.interaction={enabled:!0};var a=function(t){return t};"time"===type&&(a=d3.time.format(config.axis.x.tick.format)),config.tooltip={show:!0,grouped:"bar"===type,contents:function(t){for(var e="",i=0;i<t.length;i++)if(data.isData[t[i].id]){var r=config.data.names[t[i].id];e+="<tr><td>"+r+"</td><td>"+t[i].value+"</td></tr>"}return e?(e="bar"===type?"<tr><td colspan='2'>"+data.barLabels[t[0].x]+"</td></tr>"+e:"<tr><td>"+data.xNames[t[0].id]+"</td><td>"+a(t[0].x)+"</td></tr>"+e,e="<table>"+e+"</table>",e="<div id='tooltip'>"+e+"</div>"):""}},config.point={r:function(t){return data.radii[t.id]?30*data.radii[t.id][t.index]/data.maxRadii[t.id]:0}},config.axis.x.tick&&!config.axis.x.tick.format&&(config.axis.x.tick.format=function(t){var a=String(t);if("time"===type){var e=a.match(/\d+:\d+:\d+/)[0];a=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" "+e}var i=void 0===axis.xLabels[a]?t:axis.xLabels[a];return Math.round(i)||i}),config.axis.y.tick&&(config.axis.y.tick.format=function(t){return axis.yLabels[String(t)]||Math.round(t)}),config.axis.y2.tick&&(config.axis.y2.tick.format=function(t){return axis.y2Labels[String(t)]||Math.round(t)});var e=[];for(var i in config.data.xs)data.isData[i]||e.push(i);config.legend.hide=e;var r=!!config.data.labels;r&&(config.data.labels={format:function(t,a){return data.isData[a]?t||"":data.annotations[a]||""}}),config.data.order=!1,config.onrendered=function(){for(var t in data.pointStyles){var a=data.pointStyles[t];applyPointShape(t,a),applyLegendShape(t,a)}for(var t in config.data.colors){if("bar"===type)for(var e=d3.selectAll(".c3-bars-"+t+" path")[0],i=0;i<e.length;i++){data.barColors[t]&&data.barColors[t][i]&&(e[i].style.fill=data.barColors[t][i]);var r;data.barOpacities[t]&&(r=data.barOpacities[t][i]),r=r||data.lineOpacities[t],e[i].style.opacity=r}else{var l=d3.selectAll(".c3-lines-"+t+" path")[0][0];l&&(l.style.opacity=data.lineOpacities[t])}var n=d3.selectAll(".c3-legend-item-"+t+" path")[0];n.length||(n=d3.selectAll(".c3-legend-item-"+t+" line")[0]),n.length&&(n=n[0],n.style.opacity=data.lineOpacities[t]);var o=d3.selectAll(".c3-circles-"+t+" path")[0];o.length||(o=d3.selectAll(".c3-circles-"+t+" circle")[0]);for(var i=0;i<o.length;i++)o[i].style.opacity=data.lineOpacities[t]}for(var t in data.areaColors){var c=d3.selectAll(".c3-areas-"+t+" path")[0][0];c&&(c.style.fill=data.areaColors[t],c.style.opacity=data.areaOpacities[t])}var d=0,s=setInterval(function(){return d+=retryFrequency,window.Android?(clearInterval(s),void Android.run()):void(d>maxDelay&&clearInterval(s))})},c3.generate(config)}catch(l){displayError(l)}},retryFrequency);