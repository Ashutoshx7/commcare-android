function displayError(t){var e=document.getElementById("error");throw e.innerHTML=t,e.style.display="block",t}function applyPointShape(t,e){if("bar"!==type&&"bubble"!==type){var a=d3.selectAll(".c3-circles-"+t),i=a.selectAll("circle")[0];if(i)for(var r=0;r<i.length;r++)i[r].style.opacity=0,appendSymbol(a,i[r].cx.baseVal.value,i[r].cy.baseVal.value,e,i[r].style.fill)}}function applyLegendShape(t,e){if("none"!==e){var a=d3.selectAll(".c3-legend-item-"+t),i=a.selectAll("line");if(!i||!i.length)return;i=i[0][0],i.style.opacity=0,appendSymbol(a,i.x1.baseVal.value+5,i.y1.baseVal.value,e,i.style.stroke)}}function appendSymbol(t,e,a,i,r){"none"!==i&&t.append("path").attr("transform",function(){return"translate("+e+", "+a+")"}).attr("class","symbol").attr("d",d3.svg.symbol().type(i).size(50)).style("fill",r).style("stroke",r)}var retryFrequency=10,delay=0,maxDelay=1e4,intervalID=setInterval(function(){if(delay+=retryFrequency,!document.getElementById("chart")||!document.body.offsetWidth||!document.body.offsetHeight)return void(delay>maxDelay&&clearInterval(intervalID));clearInterval(intervalID);try{var t=(document.getElementById("chart-title")||{offsetHeight:0}).offsetHeight;config.size={height:document.body.offsetHeight-t,width:document.body.offsetWidth},config.interaction={enabled:!0};var e=function(t){return t};"time"===type&&(e=d3.time.format(config.axis.x.tick.format)),config.tooltip={show:!0,grouped:"bar"===type,contents:function(t){for(var a="",i=0;i<t.length;i++)if(data.isData[t[i].id]){var r=config.data.names[t[i].id];a+="<tr><td>"+r+"</td><td>"+t[i].value+"</td></tr>"}return a?(a="bar"===type?"<tr><td colspan='2'>"+data.barLabels[t[0].x]+"</td></tr>"+a:"<tr><td>"+data.xNames[t[0].id]+"</td><td>"+e(t[0].x)+"</td></tr>"+a,"bubble"===type&&(a+="<tr><td>Radius</td><td>"+data.radii[d.id][d.index]+"</td></tr>"),a="<table>"+a+"</table>",a="<div id='tooltip'>"+a+"</div>"):""}},config.point={r:function(t){return data.radii[t.id]?30*data.radii[t.id][t.index]/data.maxRadii[t.id]:0}},config.axis.x.tick&&!config.axis.x.tick.format&&(config.axis.x.tick.format=function(t){var e=t+"";if("time"===type){var a=e.match(/\d+:\d+:\d+/)[0];e=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" "+a}var i=void 0===axis.xLabels[e]?t:axis.xLabels[e];return Math.round(i)||i}),config.axis.y.tick&&(config.axis.y.tick.format=function(t){return axis.yLabels[t+""]||Math.round(t)}),config.axis.y2.tick&&(config.axis.y2.tick.format=function(t){return axis.y2Labels[t+""]||Math.round(t)});var a=[];for(var i in config.data.xs)data.isData[i]||a.push(i);config.legend.hide=a,config.data.labels={format:function(t,e){return data.annotations[e]||""}},config.data.order=!1,config.onrendered=function(){d3.selectAll("g.c3-texts text").attr("dy",10);for(var t in data.pointStyles){var e=data.pointStyles[t];applyPointShape(t,e),applyLegendShape(t,e)}for(var t in config.data.colors){if("bar"===type)for(var a=d3.selectAll(".c3-bars-"+t+" path")[0],i=0;i<a.length;i++){data.barColors[t]&&data.barColors[t][i]&&(a[i].style.fill=data.barColors[t][i]);var r;data.barOpacities[t]&&(r=data.barOpacities[t][i]),r=r||data.lineOpacities[t],a[i].style.opacity=r}else{var l=d3.selectAll(".c3-lines-"+t+" path")[0][0];l&&(l.style.opacity=data.lineOpacities[t])}var n=d3.selectAll(".c3-legend-item-"+t+" path")[0];n.length||(n=d3.selectAll(".c3-legend-item-"+t+" line")[0]),n.length&&(n=n[0],n.style.opacity=data.lineOpacities[t]);var o=d3.selectAll(".c3-circles-"+t+" path")[0];o.length||(o=d3.selectAll(".c3-circles-"+t+" circle")[0]);for(var i=0;i<o.length;i++)o[i].style.opacity=data.lineOpacities[t]}for(var t in data.areaColors){var d=d3.selectAll(".c3-areas-"+t+" path")[0][0];d&&(d.style.fill=data.areaColors[t],d.style.opacity=data.areaOpacities[t])}document.getElementById("chart-title").style.display="block";var c=0,s=setInterval(function(){return c+=retryFrequency,window.Android?(clearInterval(s),void Android.showGraph()):void(c>maxDelay&&clearInterval(s))})},c3.generate(config)}catch(r){displayError(r)}},retryFrequency);